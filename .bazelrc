import %workspace%/bazel/defaults.bazelrc

# Don't try and auto detect the cc toolchain, as we use our own gcc toolchains.
common --action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1
common --incompatible_enable_cc_toolchain_resolution

# Check local dev setup
common --workspace_status_command=tools/githooks/check-config.sh

# Don't link against libunwind on macos as it causes linking failures (https://github.com/bazel-contrib/toolchains_llvm/pull/346)
common:macos --@toolchains_llvm//toolchain/config:libunwind=False
common:macos --build_tag_filters=-no-macos

common:release --stamp
common:release --workspace_status_command "${PWD}/bazel/workspace_status.sh"
common:release --compilation_mode=opt

common --@rules_rust//rust/settings:lto=fat

# Speed up local development by using the non-hermetic CPP toolchain.
common:nollvm --action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=0
common:nollvm --noincompatible_enable_cc_toolchain_resolution
